{"ast":null,"code":"var _jsxFileName = \"/home/joel/Desktop/Application Development/Autogenerate2dmovie/src/components/VideoExporter.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { FaDownload, FaVideo, FaFileImage, FaCog, FaCheckCircle, FaExclamationTriangle } from 'react-icons/fa';\nimport GIF from 'gif.js';\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoExporter = ({\n  storyboard\n}) => {\n  _s();\n  const [exportFormat, setExportFormat] = useState('mp4');\n  const [resolution, setResolution] = useState('1080p');\n  const [quality, setQuality] = useState('high');\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n  const [exportComplete, setExportComplete] = useState(false);\n  const [exportStatus, setExportStatus] = useState('');\n  const [ffmpeg] = useState(() => new FFmpeg({\n    log: true\n  }));\n  const handleExport = async () => {\n    setIsExporting(true);\n    setExportProgress(0);\n    setExportComplete(false);\n    setExportStatus('Initializing...');\n    try {\n      // Generate actual video data\n      setExportStatus('Generating frames...');\n      const videoData = await generateVideoData();\n      setExportStatus('Downloading file...');\n      downloadVideo(videoData);\n      setExportComplete(true);\n      setExportStatus('Export complete!');\n    } catch (error) {\n      console.error('Export failed:', error);\n      setExportStatus('Export failed. Please try again.');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n  const generateVideoData = async () => {\n    setExportProgress(10);\n\n    // Create actual video frames from storyboard\n    const canvas = document.createElement('canvas');\n    canvas.width = resolution === '1080p' ? 1920 : 1280;\n    canvas.height = resolution === '1080p' ? 1080 : 720;\n    const ctx = canvas.getContext('2d');\n\n    // Generate frames for each scene\n    const frames = [];\n    const framesPerSecond = 10; // Reduced for performance\n\n    setExportProgress(20);\n    setExportStatus('Creating storyboard frames...');\n    for (let sceneIndex = 0; sceneIndex < storyboard.scenes.length; sceneIndex++) {\n      const scene = storyboard.scenes[sceneIndex];\n      const sceneFrames = Math.min(scene.duration * framesPerSecond, 30); // Limit frames\n\n      for (let frame = 0; frame < sceneFrames; frame++) {\n        // Draw background\n        drawBackground(ctx, canvas, scene.background);\n\n        // Draw characters\n        drawCharacters(ctx, canvas, scene.characters, frame / framesPerSecond);\n\n        // Draw text overlay\n        drawText(ctx, canvas, scene.text);\n\n        // Add effects\n        drawEffects(ctx, canvas, scene.effects, frame / framesPerSecond);\n\n        // Capture frame\n        frames.push(canvas.toDataURL('image/png'));\n      }\n\n      // Update progress\n      const currentProgress = 20 + (sceneIndex + 1) / storyboard.scenes.length * 40;\n      setExportProgress(Math.min(currentProgress, 60));\n    }\n    setExportProgress(60);\n    setExportStatus(`Creating ${exportFormat.toUpperCase()} video...`);\n\n    // Create video from frames\n    if (exportFormat === 'gif') {\n      return await createGIF(frames);\n    } else {\n      return await createMP4(frames);\n    }\n  };\n  const drawBackground = (ctx, canvas, background) => {\n    const backgrounds = {\n      'sunny meadow with colorful flowers': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#87CEEB');\n        gradient.addColorStop(1, '#98FB98');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Draw flowers\n        ctx.fillStyle = '#FFB6C1';\n        for (let i = 0; i < 5; i++) {\n          const x = canvas.width / 6 * (i + 1);\n          const y = canvas.height - 50;\n          ctx.beginPath();\n          ctx.arc(x, y, 15, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      },\n      'magical forest with glowing trees': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#9370DB');\n        gradient.addColorStop(1, '#228B22');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Draw glowing trees\n        ctx.fillStyle = '#90EE90';\n        for (let i = 0; i < 4; i++) {\n          const x = canvas.width / 5 * (i + 1);\n          ctx.fillRect(x - 20, canvas.height - 200, 40, 150);\n        }\n      },\n      'starry night sky with moon': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#191970');\n        gradient.addColorStop(1, '#000080');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Draw moon\n        ctx.fillStyle = '#F0E68C';\n        ctx.beginPath();\n        ctx.arc(canvas.width - 100, 100, 40, 0, Math.PI * 2);\n        ctx.fill();\n\n        // Draw stars\n        ctx.fillStyle = '#FFFFFF';\n        for (let i = 0; i < 20; i++) {\n          const x = Math.random() * canvas.width;\n          const y = Math.random() * (canvas.height / 2);\n          ctx.beginPath();\n          ctx.arc(x, y, 2, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      }\n    };\n    const drawFunc = backgrounds[background] || backgrounds['sunny meadow with colorful flowers'];\n    drawFunc();\n  };\n  const drawCharacters = (ctx, canvas, characters, time) => {\n    characters.forEach((character, index) => {\n      const x = canvas.width / 2 + (index - 0.5) * 100;\n      const y = canvas.height - 150;\n      const bounce = Math.sin(time * Math.PI * 2) * 10;\n\n      // Draw character based on shape\n      ctx.fillStyle = character.color;\n      if (character.shape === 'circle') {\n        ctx.beginPath();\n        ctx.arc(x, y + bounce, 40, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (character.shape === 'square') {\n        ctx.fillRect(x - 40 + bounce / 2, y - 40 + bounce, 80, 80);\n      } else if (character.shape === 'star') {\n        drawStar(ctx, x, y + bounce, 40);\n      }\n\n      // Draw character initial\n      ctx.fillStyle = '#FFFFFF';\n      ctx.font = 'bold 24px Arial';\n      ctx.textAlign = 'center';\n      ctx.fillText(character.name[0], x, y + bounce + 8);\n    });\n  };\n  const drawStar = (ctx, cx, cy, radius) => {\n    const spikes = 5;\n    const outerRadius = radius;\n    const innerRadius = radius / 2;\n    ctx.beginPath();\n    for (let i = 0; i < spikes * 2; i++) {\n      const angle = i * Math.PI / spikes - Math.PI / 2;\n      const r = i % 2 === 0 ? outerRadius : innerRadius;\n      const x = cx + Math.cos(angle) * r;\n      const y = cy + Math.sin(angle) * r;\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n  };\n  const drawText = (ctx, canvas, text) => {\n    if (!text) return;\n\n    // Draw text background\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n    const padding = 20;\n    const textWidth = ctx.measureText(text).width + padding * 2;\n    const textHeight = 60;\n    const x = (canvas.width - textWidth) / 2;\n    const y = canvas.height / 2 - textHeight / 2;\n    ctx.fillRect(x, y, textWidth, textHeight);\n\n    // Draw text\n    ctx.fillStyle = '#333333';\n    ctx.font = '20px Arial';\n    ctx.textAlign = 'center';\n    ctx.fillText(text, canvas.width / 2, canvas.height / 2 + 5);\n  };\n  const drawEffects = (ctx, canvas, effects, time) => {\n    if (effects.includes('sparkles')) {\n      ctx.fillStyle = 'rgba(255, 215, 0, 0.7)';\n      for (let i = 0; i < 10; i++) {\n        const x = Math.random() * canvas.width;\n        const y = Math.random() * canvas.height;\n        const size = Math.random() * 3 + 1;\n        ctx.beginPath();\n        ctx.arc(x, y, size, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n    if (effects.includes('bubbles')) {\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';\n      ctx.lineWidth = 2;\n      for (let i = 0; i < 5; i++) {\n        const x = Math.random() * canvas.width;\n        const y = canvas.height - (time * 100 + i * 50) % canvas.height;\n        ctx.beginPath();\n        ctx.arc(x, y, 10 + Math.random() * 10, 0, Math.PI * 2);\n        ctx.stroke();\n      }\n    }\n  };\n  const createGIF = frames => {\n    return new Promise(resolve => {\n      const gif = new GIF({\n        workers: 2,\n        quality: 10,\n        width: resolution === '1080p' ? 1920 : 1280,\n        height: resolution === '1080p' ? 1080 : 720,\n        workerScript: 'https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.worker.js'\n      });\n\n      // Add frames to GIF (sample every 10th frame to reduce size)\n      const sampleRate = 10;\n      frames.forEach((frame, index) => {\n        if (index % sampleRate === 0) {\n          const img = new Image();\n          img.onload = () => {\n            gif.addFrame(img, {\n              delay: sampleRate * 33\n            }); // ~30fps\n          };\n          img.src = frame;\n        }\n      });\n      gif.on('finished', blob => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n\n      // Render GIF after all images are loaded\n      setTimeout(() => {\n        gif.render();\n      }, 1000);\n    });\n  };\n  const createMP4 = async frames => {\n    try {\n      setExportProgress(70);\n      setExportStatus('Creating MP4 video...');\n      console.log('Starting MP4 creation...');\n\n      // Use MediaRecorder API to create WebM, then convert to MP4-like format\n      const canvas = document.createElement('canvas');\n      canvas.width = resolution === '1080p' ? 1920 : 1280;\n      canvas.height = resolution === '1080p' ? 1080 : 720;\n      const ctx = canvas.getContext('2d');\n      setExportProgress(75);\n      setExportStatus('Recording video frames...');\n      const stream = canvas.captureStream(10); // 10fps for smaller file\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp8',\n        videoBitsPerSecond: quality === 'high' ? 2000000 : quality === 'medium' ? 1000000 : 500000\n      });\n      const chunks = [];\n      mediaRecorder.ondataavailable = chunk => {\n        chunks.push(chunk);\n      };\n      mediaRecorder.onstop = () => {\n        setExportProgress(90);\n        setExportStatus('Finalizing video...');\n        const blob = new Blob(chunks, {\n          type: 'video/webm'\n        });\n\n        // Create a proper MP4-like container\n        const reader = new FileReader();\n        reader.onload = () => {\n          // Convert WebM to data URL but save as .mp4 for compatibility\n          const dataUrl = reader.result;\n          console.log('Video created successfully, size:', blob.size);\n          setExportProgress(100);\n          resolve(dataUrl);\n        };\n        reader.readAsDataURL(blob);\n      };\n      setExportProgress(80);\n      setExportStatus('Recording frames...');\n      mediaRecorder.start();\n\n      // Draw frames to canvas\n      let frameIndex = 0;\n      const drawFrame = () => {\n        if (frameIndex >= frames.length) {\n          mediaRecorder.stop();\n          return;\n        }\n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0);\n          frameIndex++;\n          setTimeout(drawFrame, 100); // 10fps = 100ms per frame\n        };\n        img.src = frames[frameIndex];\n      };\n\n      // Start drawing after a short delay\n      setTimeout(drawFrame, 100);\n    } catch (error) {\n      console.error('Video creation failed:', error);\n      setExportStatus('Video creation failed, trying fallback...');\n      // Create a simple image sequence as fallback\n      return createImageSequenceFallback(frames);\n    }\n  };\n  const createImageSequenceFallback = frames => {\n    setExportProgress(85);\n    setExportStatus('Creating image sequence...');\n\n    // Create a single image with all frames as a grid\n    const canvas = document.createElement('canvas');\n    const cols = Math.ceil(Math.sqrt(frames.length));\n    const rows = Math.ceil(frames.length / cols);\n    const frameWidth = 320;\n    const frameHeight = 180;\n    canvas.width = cols * frameWidth;\n    canvas.height = rows * frameHeight;\n    const ctx = canvas.getContext('2d');\n    frames.forEach((frame, index) => {\n      const img = new Image();\n      img.onload = () => {\n        const col = index % cols;\n        const row = Math.floor(index / cols);\n        ctx.drawImage(img, col * frameWidth, row * frameHeight, frameWidth, frameHeight);\n        if (index === frames.length - 1) {\n          // All frames loaded, create download\n          const dataUrl = canvas.toDataURL('image/png');\n          setExportProgress(100);\n          setExportStatus('Image sequence created');\n          resolve(dataUrl);\n        }\n      };\n      img.src = frame;\n    });\n    return new Promise(resolve => {\n      // This will be resolved when all images are loaded\n    });\n  };\n  const createWebMFallback = frames => {\n    return new Promise(resolve => {\n      const canvas = document.createElement('canvas');\n      canvas.width = resolution === '1080p' ? 1920 : 1280;\n      canvas.height = resolution === '1080p' ? 1080 : 720;\n      const ctx = canvas.getContext('2d');\n      const stream = canvas.captureStream(30);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp9',\n        videoBitsPerSecond: quality === 'high' ? 2500000 : quality === 'medium' ? 1500000 : 500000\n      });\n      const chunks = [];\n      mediaRecorder.ondataavailable = chunk => chunks.push(chunk);\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(chunks, {\n          type: 'video/webm'\n        });\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.readAsDataURL(blob);\n      };\n      mediaRecorder.start();\n      let frameIndex = 0;\n      const drawFrame = () => {\n        if (frameIndex >= frames.length) {\n          mediaRecorder.stop();\n          return;\n        }\n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0);\n          frameIndex++;\n          setTimeout(drawFrame, 33);\n        };\n        img.src = frames[frameIndex];\n      };\n      setTimeout(drawFrame, 100);\n    });\n  };\n  const downloadVideo = dataUrl => {\n    const link = document.createElement('a');\n    link.href = dataUrl;\n\n    // Detect actual file type from data URL\n    let extension = 'mp4';\n    let mimeType = 'video/mp4';\n    if (dataUrl.includes('video/webm')) {\n      extension = 'webm';\n      mimeType = 'video/webm';\n    } else if (dataUrl.includes('image/png')) {\n      extension = 'png';\n      mimeType = 'image/png';\n    }\n    link.download = `storyboard-${Date.now()}.${extension}`;\n\n    // Create blob with correct MIME type\n    if (dataUrl.startsWith('data:')) {\n      const base64Data = dataUrl.split(',')[1];\n      const byteCharacters = atob(base64Data);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      const blob = new Blob([byteArray], {\n        type: mimeType\n      });\n      link.href = URL.createObjectURL(blob);\n    }\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    // Clean up object URL if created\n    if (link.href.startsWith('blob:')) {\n      URL.revokeObjectURL(link.href);\n    }\n  };\n  const formatDetails = {\n    mp4: {\n      icon: /*#__PURE__*/_jsxDEV(FaVideo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 13\n      }, this),\n      name: 'MP4 Video',\n      description: 'Universal format for all devices',\n      fileSize: '~5-10 MB',\n      compatibility: 'All devices & platforms'\n    },\n    gif: {\n      icon: /*#__PURE__*/_jsxDEV(FaFileImage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 13\n      }, this),\n      name: 'GIF Animation',\n      description: 'Perfect for social media',\n      fileSize: '~2-5 MB',\n      compatibility: 'Web & Mobile'\n    }\n  };\n  const resolutionDetails = {\n    '1080p': {\n      width: 1920,\n      height: 1080,\n      quality: 'Full HD'\n    },\n    '720p': {\n      width: 1280,\n      height: 720,\n      quality: 'HD'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-xl p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-800 mb-6\",\n        children: \"Export Your Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(FaCog, {\n                className: \"text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Export Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"Format\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-3\",\n                children: Object.entries(formatDetails).map(([format, details]) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setExportFormat(format),\n                  className: `p-4 rounded-xl border-2 transition-all ${exportFormat === format ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-gray-300'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center mb-2 text-purple-600\",\n                    children: details.icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm font-medium text-gray-800\",\n                    children: details.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500 mt-1\",\n                    children: details.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 23\n                  }, this)]\n                }, format, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 mt-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"Resolution\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-3\",\n                children: Object.entries(resolutionDetails).map(([res, details]) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setResolution(res),\n                  className: `p-3 rounded-xl border-2 transition-all ${resolution === res ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-gray-300'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm font-medium text-gray-800\",\n                    children: res\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: details.quality\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-400 mt-1\",\n                    children: [details.width, \" \\xD7 \", details.height]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 565,\n                    columnNumber: 23\n                  }, this)]\n                }, res, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 mt-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: \"Quality\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: quality,\n                onChange: e => setQuality(e.target.value),\n                className: \"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"high\",\n                  children: \"High (Best Quality)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"medium\",\n                  children: \"Medium (Balanced)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"low\",\n                  children: \"Low (Smaller File)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-4\",\n              children: \"Video Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Duration:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: [storyboard.duration, \" seconds\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Scenes:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 600,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: [storyboard.scenes.length, \" scenes\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 601,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Characters:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: [storyboard.characters.length, \" characters\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Format:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium uppercase\",\n                  children: exportFormat\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Resolution:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: resolution\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 613,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Estimated Size:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: formatDetails[exportFormat].fileSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 617,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 615,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), !isExporting && !exportComplete && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleExport,\n            className: \"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(FaDownload, {\n              className: \"text-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Export Video\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 15\n          }, this), isExporting && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium text-gray-700 mb-2\",\n                children: \"Exporting...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full bg-gray-200 rounded-full h-2\",\n                children: /*#__PURE__*/_jsxDEV(motion.div, {\n                  className: \"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full\",\n                  initial: {\n                    width: 0\n                  },\n                  animate: {\n                    width: `${exportProgress}%`\n                  },\n                  transition: {\n                    duration: 0.1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: [exportProgress, \"% - \", exportStatus]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 15\n          }, this), exportComplete && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-50 border border-green-200 rounded-xl p-6 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n              className: \"text-green-600 text-3xl mx-auto mb-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-green-800 font-medium mb-2\",\n              children: \"Export Complete!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-green-600 text-sm\",\n              children: \"Your video has been downloaded successfully.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleExport,\n              className: \"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm\",\n              children: \"Export Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-xl p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(FaExclamationTriangle, {\n                className: \"text-blue-600 mt-1 flex-shrink-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-blue-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium mb-1\",\n                  children: \"Export Tips:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-blue-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"\\u2022 MP4 works on all devices and platforms\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 678,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"\\u2022 GIF is perfect for social media\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 679,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"\\u2022 720p exports faster with smaller file size\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"\\u2022 High quality takes longer but looks better\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 681,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-xl p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-800 mb-4\",\n        children: \"Scene Timeline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: storyboard.scenes.map((scene, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 text-sm font-medium text-gray-500\",\n            children: [\"00:\", (index * 10).toString().padStart(2, '0')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 h-2 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-20 text-sm text-gray-600 truncate\",\n            children: [\"Scene \", index + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 15\n          }, this)]\n        }, scene.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 691,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 512,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoExporter, \"OpVu7SrY5AKTh6kt/X4QSx4vuBY=\");\n_c = VideoExporter;\nexport default VideoExporter;\nvar _c;\n$RefreshReg$(_c, \"VideoExporter\");","map":{"version":3,"names":["React","useState","motion","FaDownload","FaVideo","FaFileImage","FaCog","FaCheckCircle","FaExclamationTriangle","GIF","FFmpeg","jsxDEV","_jsxDEV","VideoExporter","storyboard","_s","exportFormat","setExportFormat","resolution","setResolution","quality","setQuality","isExporting","setIsExporting","exportProgress","setExportProgress","exportComplete","setExportComplete","exportStatus","setExportStatus","ffmpeg","log","handleExport","videoData","generateVideoData","downloadVideo","error","console","canvas","document","createElement","width","height","ctx","getContext","frames","framesPerSecond","sceneIndex","scenes","length","scene","sceneFrames","Math","min","duration","frame","drawBackground","background","drawCharacters","characters","drawText","text","drawEffects","effects","push","toDataURL","currentProgress","toUpperCase","createGIF","createMP4","backgrounds","sunny meadow with colorful flowers","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","i","x","y","beginPath","arc","PI","fill","magical forest with glowing trees","starry night sky with moon","random","drawFunc","time","forEach","character","index","bounce","sin","color","shape","drawStar","font","textAlign","fillText","name","cx","cy","radius","spikes","outerRadius","innerRadius","angle","r","cos","moveTo","lineTo","closePath","padding","textWidth","measureText","textHeight","includes","size","strokeStyle","lineWidth","stroke","Promise","resolve","gif","workers","workerScript","sampleRate","img","Image","onload","addFrame","delay","src","on","blob","reader","FileReader","result","readAsDataURL","setTimeout","render","stream","captureStream","mediaRecorder","MediaRecorder","mimeType","videoBitsPerSecond","chunks","ondataavailable","chunk","onstop","Blob","type","dataUrl","start","frameIndex","drawFrame","stop","drawImage","createImageSequenceFallback","cols","ceil","sqrt","rows","frameWidth","frameHeight","col","row","floor","createWebMFallback","link","href","extension","download","Date","now","startsWith","base64Data","split","byteCharacters","atob","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","URL","createObjectURL","body","appendChild","click","removeChild","revokeObjectURL","formatDetails","mp4","icon","fileName","_jsxFileName","lineNumber","columnNumber","description","fileSize","compatibility","resolutionDetails","className","children","Object","entries","map","format","details","onClick","res","value","onChange","e","target","div","initial","animate","transition","toString","padStart","id","_c","$RefreshReg$"],"sources":["/home/joel/Desktop/Application Development/Autogenerate2dmovie/src/components/VideoExporter.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { FaDownload, FaVideo, FaFileImage, FaCog, FaCheckCircle, FaExclamationTriangle } from 'react-icons/fa';\nimport GIF from 'gif.js';\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\n\nconst VideoExporter = ({ storyboard }) => {\n  const [exportFormat, setExportFormat] = useState('mp4');\n  const [resolution, setResolution] = useState('1080p');\n  const [quality, setQuality] = useState('high');\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n  const [exportComplete, setExportComplete] = useState(false);\n  const [exportStatus, setExportStatus] = useState('');\n  \n  const [ffmpeg] = useState(() => new FFmpeg({ log: true }));\n\n  const handleExport = async () => {\n    setIsExporting(true);\n    setExportProgress(0);\n    setExportComplete(false);\n    setExportStatus('Initializing...');\n\n    try {\n      // Generate actual video data\n      setExportStatus('Generating frames...');\n      const videoData = await generateVideoData();\n      \n      setExportStatus('Downloading file...');\n      downloadVideo(videoData);\n      \n      setExportComplete(true);\n      setExportStatus('Export complete!');\n    } catch (error) {\n      console.error('Export failed:', error);\n      setExportStatus('Export failed. Please try again.');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const generateVideoData = async () => {\n    setExportProgress(10);\n    \n    // Create actual video frames from storyboard\n    const canvas = document.createElement('canvas');\n    canvas.width = resolution === '1080p' ? 1920 : 1280;\n    canvas.height = resolution === '1080p' ? 1080 : 720;\n    const ctx = canvas.getContext('2d');\n\n    // Generate frames for each scene\n    const frames = [];\n    const framesPerSecond = 10; // Reduced for performance\n    \n    setExportProgress(20);\n    setExportStatus('Creating storyboard frames...');\n    \n    for (let sceneIndex = 0; sceneIndex < storyboard.scenes.length; sceneIndex++) {\n      const scene = storyboard.scenes[sceneIndex];\n      const sceneFrames = Math.min(scene.duration * framesPerSecond, 30); // Limit frames\n      \n      for (let frame = 0; frame < sceneFrames; frame++) {\n        // Draw background\n        drawBackground(ctx, canvas, scene.background);\n        \n        // Draw characters\n        drawCharacters(ctx, canvas, scene.characters, frame / framesPerSecond);\n        \n        // Draw text overlay\n        drawText(ctx, canvas, scene.text);\n        \n        // Add effects\n        drawEffects(ctx, canvas, scene.effects, frame / framesPerSecond);\n        \n        // Capture frame\n        frames.push(canvas.toDataURL('image/png'));\n      }\n      \n      // Update progress\n      const currentProgress = 20 + (sceneIndex + 1) / storyboard.scenes.length * 40;\n      setExportProgress(Math.min(currentProgress, 60));\n    }\n    \n    setExportProgress(60);\n    setExportStatus(`Creating ${exportFormat.toUpperCase()} video...`);\n    \n    // Create video from frames\n    if (exportFormat === 'gif') {\n      return await createGIF(frames);\n    } else {\n      return await createMP4(frames);\n    }\n  };\n\n  const drawBackground = (ctx, canvas, background) => {\n    const backgrounds = {\n      'sunny meadow with colorful flowers': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#87CEEB');\n        gradient.addColorStop(1, '#98FB98');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        \n        // Draw flowers\n        ctx.fillStyle = '#FFB6C1';\n        for (let i = 0; i < 5; i++) {\n          const x = (canvas.width / 6) * (i + 1);\n          const y = canvas.height - 50;\n          ctx.beginPath();\n          ctx.arc(x, y, 15, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      },\n      'magical forest with glowing trees': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#9370DB');\n        gradient.addColorStop(1, '#228B22');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        \n        // Draw glowing trees\n        ctx.fillStyle = '#90EE90';\n        for (let i = 0; i < 4; i++) {\n          const x = (canvas.width / 5) * (i + 1);\n          ctx.fillRect(x - 20, canvas.height - 200, 40, 150);\n        }\n      },\n      'starry night sky with moon': () => {\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n        gradient.addColorStop(0, '#191970');\n        gradient.addColorStop(1, '#000080');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        \n        // Draw moon\n        ctx.fillStyle = '#F0E68C';\n        ctx.beginPath();\n        ctx.arc(canvas.width - 100, 100, 40, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // Draw stars\n        ctx.fillStyle = '#FFFFFF';\n        for (let i = 0; i < 20; i++) {\n          const x = Math.random() * canvas.width;\n          const y = Math.random() * (canvas.height / 2);\n          ctx.beginPath();\n          ctx.arc(x, y, 2, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      }\n    };\n    \n    const drawFunc = backgrounds[background] || backgrounds['sunny meadow with colorful flowers'];\n    drawFunc();\n  };\n\n  const drawCharacters = (ctx, canvas, characters, time) => {\n    characters.forEach((character, index) => {\n      const x = canvas.width / 2 + (index - 0.5) * 100;\n      const y = canvas.height - 150;\n      const bounce = Math.sin(time * Math.PI * 2) * 10;\n      \n      // Draw character based on shape\n      ctx.fillStyle = character.color;\n      \n      if (character.shape === 'circle') {\n        ctx.beginPath();\n        ctx.arc(x, y + bounce, 40, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (character.shape === 'square') {\n        ctx.fillRect(x - 40 + bounce/2, y - 40 + bounce, 80, 80);\n      } else if (character.shape === 'star') {\n        drawStar(ctx, x, y + bounce, 40);\n      }\n      \n      // Draw character initial\n      ctx.fillStyle = '#FFFFFF';\n      ctx.font = 'bold 24px Arial';\n      ctx.textAlign = 'center';\n      ctx.fillText(character.name[0], x, y + bounce + 8);\n    });\n  };\n\n  const drawStar = (ctx, cx, cy, radius) => {\n    const spikes = 5;\n    const outerRadius = radius;\n    const innerRadius = radius / 2;\n    \n    ctx.beginPath();\n    for (let i = 0; i < spikes * 2; i++) {\n      const angle = (i * Math.PI) / spikes - Math.PI / 2;\n      const r = i % 2 === 0 ? outerRadius : innerRadius;\n      const x = cx + Math.cos(angle) * r;\n      const y = cy + Math.sin(angle) * r;\n      \n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n  };\n\n  const drawText = (ctx, canvas, text) => {\n    if (!text) return;\n    \n    // Draw text background\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n    const padding = 20;\n    const textWidth = ctx.measureText(text).width + padding * 2;\n    const textHeight = 60;\n    const x = (canvas.width - textWidth) / 2;\n    const y = canvas.height / 2 - textHeight / 2;\n    \n    ctx.fillRect(x, y, textWidth, textHeight);\n    \n    // Draw text\n    ctx.fillStyle = '#333333';\n    ctx.font = '20px Arial';\n    ctx.textAlign = 'center';\n    ctx.fillText(text, canvas.width / 2, canvas.height / 2 + 5);\n  };\n\n  const drawEffects = (ctx, canvas, effects, time) => {\n    if (effects.includes('sparkles')) {\n      ctx.fillStyle = 'rgba(255, 215, 0, 0.7)';\n      for (let i = 0; i < 10; i++) {\n        const x = Math.random() * canvas.width;\n        const y = Math.random() * canvas.height;\n        const size = Math.random() * 3 + 1;\n        ctx.beginPath();\n        ctx.arc(x, y, size, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n    \n    if (effects.includes('bubbles')) {\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';\n      ctx.lineWidth = 2;\n      for (let i = 0; i < 5; i++) {\n        const x = Math.random() * canvas.width;\n        const y = canvas.height - (time * 100 + i * 50) % canvas.height;\n        ctx.beginPath();\n        ctx.arc(x, y, 10 + Math.random() * 10, 0, Math.PI * 2);\n        ctx.stroke();\n      }\n    }\n  };\n\n  const createGIF = (frames) => {\n    return new Promise((resolve) => {\n      const gif = new GIF({\n        workers: 2,\n        quality: 10,\n        width: resolution === '1080p' ? 1920 : 1280,\n        height: resolution === '1080p' ? 1080 : 720,\n        workerScript: 'https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.worker.js'\n      });\n      \n      // Add frames to GIF (sample every 10th frame to reduce size)\n      const sampleRate = 10;\n      frames.forEach((frame, index) => {\n        if (index % sampleRate === 0) {\n          const img = new Image();\n          img.onload = () => {\n            gif.addFrame(img, { delay: sampleRate * 33 }); // ~30fps\n          };\n          img.src = frame;\n        }\n      });\n      \n      gif.on('finished', (blob) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n      \n      // Render GIF after all images are loaded\n      setTimeout(() => {\n        gif.render();\n      }, 1000);\n    });\n  };\n\n  const createMP4 = async (frames) => {\n    try {\n      setExportProgress(70);\n      setExportStatus('Creating MP4 video...');\n      console.log('Starting MP4 creation...');\n      \n      // Use MediaRecorder API to create WebM, then convert to MP4-like format\n      const canvas = document.createElement('canvas');\n      canvas.width = resolution === '1080p' ? 1920 : 1280;\n      canvas.height = resolution === '1080p' ? 1080 : 720;\n      const ctx = canvas.getContext('2d');\n      \n      setExportProgress(75);\n      setExportStatus('Recording video frames...');\n      \n      const stream = canvas.captureStream(10); // 10fps for smaller file\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp8',\n        videoBitsPerSecond: quality === 'high' ? 2000000 : quality === 'medium' ? 1000000 : 500000\n      });\n      \n      const chunks = [];\n      mediaRecorder.ondataavailable = (chunk) => {\n        chunks.push(chunk);\n      };\n      \n      mediaRecorder.onstop = () => {\n        setExportProgress(90);\n        setExportStatus('Finalizing video...');\n        \n        const blob = new Blob(chunks, { type: 'video/webm' });\n        \n        // Create a proper MP4-like container\n        const reader = new FileReader();\n        reader.onload = () => {\n          // Convert WebM to data URL but save as .mp4 for compatibility\n          const dataUrl = reader.result;\n          console.log('Video created successfully, size:', blob.size);\n          setExportProgress(100);\n          resolve(dataUrl);\n        };\n        reader.readAsDataURL(blob);\n      };\n      \n      setExportProgress(80);\n      setExportStatus('Recording frames...');\n      \n      mediaRecorder.start();\n      \n      // Draw frames to canvas\n      let frameIndex = 0;\n      const drawFrame = () => {\n        if (frameIndex >= frames.length) {\n          mediaRecorder.stop();\n          return;\n        }\n        \n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0);\n          frameIndex++;\n          setTimeout(drawFrame, 100); // 10fps = 100ms per frame\n        };\n        img.src = frames[frameIndex];\n      };\n      \n      // Start drawing after a short delay\n      setTimeout(drawFrame, 100);\n      \n    } catch (error) {\n      console.error('Video creation failed:', error);\n      setExportStatus('Video creation failed, trying fallback...');\n      // Create a simple image sequence as fallback\n      return createImageSequenceFallback(frames);\n    }\n  };\n  \n  const createImageSequenceFallback = (frames) => {\n    setExportProgress(85);\n    setExportStatus('Creating image sequence...');\n    \n    // Create a single image with all frames as a grid\n    const canvas = document.createElement('canvas');\n    const cols = Math.ceil(Math.sqrt(frames.length));\n    const rows = Math.ceil(frames.length / cols);\n    const frameWidth = 320;\n    const frameHeight = 180;\n    \n    canvas.width = cols * frameWidth;\n    canvas.height = rows * frameHeight;\n    const ctx = canvas.getContext('2d');\n    \n    frames.forEach((frame, index) => {\n      const img = new Image();\n      img.onload = () => {\n        const col = index % cols;\n        const row = Math.floor(index / cols);\n        ctx.drawImage(img, col * frameWidth, row * frameHeight, frameWidth, frameHeight);\n        \n        if (index === frames.length - 1) {\n          // All frames loaded, create download\n          const dataUrl = canvas.toDataURL('image/png');\n          setExportProgress(100);\n          setExportStatus('Image sequence created');\n          resolve(dataUrl);\n        }\n      };\n      img.src = frame;\n    });\n    \n    return new Promise(resolve => {\n      // This will be resolved when all images are loaded\n    });\n  };\n  \n  const createWebMFallback = (frames) => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      canvas.width = resolution === '1080p' ? 1920 : 1280;\n      canvas.height = resolution === '1080p' ? 1080 : 720;\n      const ctx = canvas.getContext('2d');\n      \n      const stream = canvas.captureStream(30);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp9',\n        videoBitsPerSecond: quality === 'high' ? 2500000 : quality === 'medium' ? 1500000 : 500000\n      });\n      \n      const chunks = [];\n      mediaRecorder.ondataavailable = (chunk) => chunks.push(chunk);\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(chunks, { type: 'video/webm' });\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.readAsDataURL(blob);\n      };\n      \n      mediaRecorder.start();\n      \n      let frameIndex = 0;\n      const drawFrame = () => {\n        if (frameIndex >= frames.length) {\n          mediaRecorder.stop();\n          return;\n        }\n        \n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0);\n          frameIndex++;\n          setTimeout(drawFrame, 33);\n        };\n        img.src = frames[frameIndex];\n      };\n      \n      setTimeout(drawFrame, 100);\n    });\n  };\n\n  const downloadVideo = (dataUrl) => {\n    const link = document.createElement('a');\n    link.href = dataUrl;\n    \n    // Detect actual file type from data URL\n    let extension = 'mp4';\n    let mimeType = 'video/mp4';\n    \n    if (dataUrl.includes('video/webm')) {\n      extension = 'webm';\n      mimeType = 'video/webm';\n    } else if (dataUrl.includes('image/png')) {\n      extension = 'png';\n      mimeType = 'image/png';\n    }\n    \n    link.download = `storyboard-${Date.now()}.${extension}`;\n    \n    // Create blob with correct MIME type\n    if (dataUrl.startsWith('data:')) {\n      const base64Data = dataUrl.split(',')[1];\n      const byteCharacters = atob(base64Data);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      const blob = new Blob([byteArray], { type: mimeType });\n      link.href = URL.createObjectURL(blob);\n    }\n    \n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    \n    // Clean up object URL if created\n    if (link.href.startsWith('blob:')) {\n      URL.revokeObjectURL(link.href);\n    }\n  };\n\n  const formatDetails = {\n    mp4: {\n      icon: <FaVideo />,\n      name: 'MP4 Video',\n      description: 'Universal format for all devices',\n      fileSize: '~5-10 MB',\n      compatibility: 'All devices & platforms'\n    },\n    gif: {\n      icon: <FaFileImage />,\n      name: 'GIF Animation',\n      description: 'Perfect for social media',\n      fileSize: '~2-5 MB',\n      compatibility: 'Web & Mobile'\n    }\n  };\n\n  const resolutionDetails = {\n    '1080p': { width: 1920, height: 1080, quality: 'Full HD' },\n    '720p': { width: 1280, height: 720, quality: 'HD' }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">Export Your Video</h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-8\">\n          {/* Export Settings */}\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2\">\n                <FaCog className=\"text-gray-600\" />\n                <span>Export Settings</span>\n              </h3>\n              \n              {/* Format Selection */}\n              <div className=\"space-y-3\">\n                <label className=\"text-sm font-medium text-gray-700\">Format</label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {Object.entries(formatDetails).map(([format, details]) => (\n                    <button\n                      key={format}\n                      onClick={() => setExportFormat(format)}\n                      className={`p-4 rounded-xl border-2 transition-all ${\n                        exportFormat === format\n                          ? 'border-purple-500 bg-purple-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-center mb-2 text-purple-600\">\n                        {details.icon}\n                      </div>\n                      <div className=\"text-sm font-medium text-gray-800\">{details.name}</div>\n                      <div className=\"text-xs text-gray-500 mt-1\">{details.description}</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Resolution Selection */}\n              <div className=\"space-y-3 mt-6\">\n                <label className=\"text-sm font-medium text-gray-700\">Resolution</label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {Object.entries(resolutionDetails).map(([res, details]) => (\n                    <button\n                      key={res}\n                      onClick={() => setResolution(res)}\n                      className={`p-3 rounded-xl border-2 transition-all ${\n                        resolution === res\n                          ? 'border-purple-500 bg-purple-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"text-sm font-medium text-gray-800\">{res}</div>\n                      <div className=\"text-xs text-gray-500\">{details.quality}</div>\n                      <div className=\"text-xs text-gray-400 mt-1\">\n                        {details.width}  {details.height}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Quality Selection */}\n              <div className=\"space-y-3 mt-6\">\n                <label className=\"text-sm font-medium text-gray-700\">Quality</label>\n                <select\n                  value={quality}\n                  onChange={(e) => setQuality(e.target.value)}\n                  className=\"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none\"\n                >\n                  <option value=\"high\">High (Best Quality)</option>\n                  <option value=\"medium\">Medium (Balanced)</option>\n                  <option value=\"low\">Low (Smaller File)</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* Export Preview & Info */}\n          <div className=\"space-y-6\">\n            {/* Video Info */}\n            <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Video Information</h3>\n              <div className=\"space-y-3 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Duration:</span>\n                  <span className=\"font-medium\">{storyboard.duration} seconds</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Scenes:</span>\n                  <span className=\"font-medium\">{storyboard.scenes.length} scenes</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Characters:</span>\n                  <span className=\"font-medium\">{storyboard.characters.length} characters</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Format:</span>\n                  <span className=\"font-medium uppercase\">{exportFormat}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Resolution:</span>\n                  <span className=\"font-medium\">{resolution}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Estimated Size:</span>\n                  <span className=\"font-medium\">\n                    {formatDetails[exportFormat].fileSize}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Export Progress */}\n            {!isExporting && !exportComplete && (\n              <button\n                onClick={handleExport}\n                className=\"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center space-x-3\"\n              >\n                <FaDownload className=\"text-lg\" />\n                <span>Export Video</span>\n              </button>\n            )}\n\n            {isExporting && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600\"></div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-sm font-medium text-gray-700 mb-2\">Exporting...</div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <motion.div\n                      className=\"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full\"\n                      initial={{ width: 0 }}\n                      animate={{ width: `${exportProgress}%` }}\n                      transition={{ duration: 0.1 }}\n                    />\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">{exportProgress}% - {exportStatus}</div>\n                </div>\n              </div>\n            )}\n\n            {exportComplete && (\n              <div className=\"bg-green-50 border border-green-200 rounded-xl p-6 text-center\">\n                <FaCheckCircle className=\"text-green-600 text-3xl mx-auto mb-3\" />\n                <div className=\"text-green-800 font-medium mb-2\">Export Complete!</div>\n                <div className=\"text-green-600 text-sm\">\n                  Your video has been downloaded successfully.\n                </div>\n                <button\n                  onClick={handleExport}\n                  className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm\"\n                >\n                  Export Again\n                </button>\n              </div>\n            )}\n\n            {/* Tips */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <div className=\"flex items-start space-x-2\">\n                <FaExclamationTriangle className=\"text-blue-600 mt-1 flex-shrink-0\" />\n                <div className=\"text-sm text-blue-800\">\n                  <div className=\"font-medium mb-1\">Export Tips:</div>\n                  <ul className=\"space-y-1 text-blue-700\">\n                    <li> MP4 works on all devices and platforms</li>\n                    <li> GIF is perfect for social media</li>\n                    <li> 720p exports faster with smaller file size</li>\n                    <li> High quality takes longer but looks better</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Scene Timeline Preview */}\n      <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Scene Timeline</h3>\n        <div className=\"space-y-3\">\n          {storyboard.scenes.map((scene, index) => (\n            <div key={scene.id} className=\"flex items-center space-x-4\">\n              <div className=\"w-12 text-sm font-medium text-gray-500\">00:{(index * 10).toString().padStart(2, '0')}</div>\n              <div className=\"flex-1 h-2 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full\"></div>\n              <div className=\"w-20 text-sm text-gray-600 truncate\">Scene {index + 1}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoExporter;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,UAAU,EAAEC,OAAO,EAAEC,WAAW,EAAEC,KAAK,EAAEC,aAAa,EAAEC,qBAAqB,QAAQ,gBAAgB;AAC9G,OAAOC,GAAG,MAAM,QAAQ;AACxB,SAASC,MAAM,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,aAAa,GAAGA,CAAC;EAAEC;AAAW,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACiB,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,OAAO,CAAC;EACrD,MAAM,CAACmB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,MAAM,CAAC;EAC9C,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACuB,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACyB,cAAc,EAAEC,iBAAiB,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC2B,YAAY,EAAEC,eAAe,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAM,CAAC6B,MAAM,CAAC,GAAG7B,QAAQ,CAAC,MAAM,IAAIS,MAAM,CAAC;IAAEqB,GAAG,EAAE;EAAK,CAAC,CAAC,CAAC;EAE1D,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/BT,cAAc,CAAC,IAAI,CAAC;IACpBE,iBAAiB,CAAC,CAAC,CAAC;IACpBE,iBAAiB,CAAC,KAAK,CAAC;IACxBE,eAAe,CAAC,iBAAiB,CAAC;IAElC,IAAI;MACF;MACAA,eAAe,CAAC,sBAAsB,CAAC;MACvC,MAAMI,SAAS,GAAG,MAAMC,iBAAiB,CAAC,CAAC;MAE3CL,eAAe,CAAC,qBAAqB,CAAC;MACtCM,aAAa,CAACF,SAAS,CAAC;MAExBN,iBAAiB,CAAC,IAAI,CAAC;MACvBE,eAAe,CAAC,kBAAkB,CAAC;IACrC,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtCP,eAAe,CAAC,kCAAkC,CAAC;IACrD,CAAC,SAAS;MACRN,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC;EAED,MAAMW,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpCT,iBAAiB,CAAC,EAAE,CAAC;;IAErB;IACA,MAAMa,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,KAAK,GAAGvB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,IAAI;IACnDoB,MAAM,CAACI,MAAM,GAAGxB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,GAAG;IACnD,MAAMyB,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;;IAEnC;IACA,MAAMC,MAAM,GAAG,EAAE;IACjB,MAAMC,eAAe,GAAG,EAAE,CAAC,CAAC;;IAE5BrB,iBAAiB,CAAC,EAAE,CAAC;IACrBI,eAAe,CAAC,+BAA+B,CAAC;IAEhD,KAAK,IAAIkB,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAGjC,UAAU,CAACkC,MAAM,CAACC,MAAM,EAAEF,UAAU,EAAE,EAAE;MAC5E,MAAMG,KAAK,GAAGpC,UAAU,CAACkC,MAAM,CAACD,UAAU,CAAC;MAC3C,MAAMI,WAAW,GAAGC,IAAI,CAACC,GAAG,CAACH,KAAK,CAACI,QAAQ,GAAGR,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;;MAEpE,KAAK,IAAIS,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGJ,WAAW,EAAEI,KAAK,EAAE,EAAE;QAChD;QACAC,cAAc,CAACb,GAAG,EAAEL,MAAM,EAAEY,KAAK,CAACO,UAAU,CAAC;;QAE7C;QACAC,cAAc,CAACf,GAAG,EAAEL,MAAM,EAAEY,KAAK,CAACS,UAAU,EAAEJ,KAAK,GAAGT,eAAe,CAAC;;QAEtE;QACAc,QAAQ,CAACjB,GAAG,EAAEL,MAAM,EAAEY,KAAK,CAACW,IAAI,CAAC;;QAEjC;QACAC,WAAW,CAACnB,GAAG,EAAEL,MAAM,EAAEY,KAAK,CAACa,OAAO,EAAER,KAAK,GAAGT,eAAe,CAAC;;QAEhE;QACAD,MAAM,CAACmB,IAAI,CAAC1B,MAAM,CAAC2B,SAAS,CAAC,WAAW,CAAC,CAAC;MAC5C;;MAEA;MACA,MAAMC,eAAe,GAAG,EAAE,GAAG,CAACnB,UAAU,GAAG,CAAC,IAAIjC,UAAU,CAACkC,MAAM,CAACC,MAAM,GAAG,EAAE;MAC7ExB,iBAAiB,CAAC2B,IAAI,CAACC,GAAG,CAACa,eAAe,EAAE,EAAE,CAAC,CAAC;IAClD;IAEAzC,iBAAiB,CAAC,EAAE,CAAC;IACrBI,eAAe,CAAC,YAAYb,YAAY,CAACmD,WAAW,CAAC,CAAC,WAAW,CAAC;;IAElE;IACA,IAAInD,YAAY,KAAK,KAAK,EAAE;MAC1B,OAAO,MAAMoD,SAAS,CAACvB,MAAM,CAAC;IAChC,CAAC,MAAM;MACL,OAAO,MAAMwB,SAAS,CAACxB,MAAM,CAAC;IAChC;EACF,CAAC;EAED,MAAMW,cAAc,GAAGA,CAACb,GAAG,EAAEL,MAAM,EAAEmB,UAAU,KAAK;IAClD,MAAMa,WAAW,GAAG;MAClB,oCAAoC,EAAEC,CAAA,KAAM;QAC1C,MAAMC,QAAQ,GAAG7B,GAAG,CAAC8B,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEnC,MAAM,CAACI,MAAM,CAAC;QACjE8B,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnCF,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnC/B,GAAG,CAACgC,SAAS,GAAGH,QAAQ;QACxB7B,GAAG,CAACiC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEtC,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,MAAM,CAAC;;QAE/C;QACAC,GAAG,CAACgC,SAAS,GAAG,SAAS;QACzB,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC1B,MAAMC,CAAC,GAAIxC,MAAM,CAACG,KAAK,GAAG,CAAC,IAAKoC,CAAC,GAAG,CAAC,CAAC;UACtC,MAAME,CAAC,GAAGzC,MAAM,CAACI,MAAM,GAAG,EAAE;UAC5BC,GAAG,CAACqC,SAAS,CAAC,CAAC;UACfrC,GAAG,CAACsC,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE3B,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;UACjCvC,GAAG,CAACwC,IAAI,CAAC,CAAC;QACZ;MACF,CAAC;MACD,mCAAmC,EAAEC,CAAA,KAAM;QACzC,MAAMZ,QAAQ,GAAG7B,GAAG,CAAC8B,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEnC,MAAM,CAACI,MAAM,CAAC;QACjE8B,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnCF,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnC/B,GAAG,CAACgC,SAAS,GAAGH,QAAQ;QACxB7B,GAAG,CAACiC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEtC,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,MAAM,CAAC;;QAE/C;QACAC,GAAG,CAACgC,SAAS,GAAG,SAAS;QACzB,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC1B,MAAMC,CAAC,GAAIxC,MAAM,CAACG,KAAK,GAAG,CAAC,IAAKoC,CAAC,GAAG,CAAC,CAAC;UACtClC,GAAG,CAACiC,QAAQ,CAACE,CAAC,GAAG,EAAE,EAAExC,MAAM,CAACI,MAAM,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,CAAC;QACpD;MACF,CAAC;MACD,4BAA4B,EAAE2C,CAAA,KAAM;QAClC,MAAMb,QAAQ,GAAG7B,GAAG,CAAC8B,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEnC,MAAM,CAACI,MAAM,CAAC;QACjE8B,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnCF,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;QACnC/B,GAAG,CAACgC,SAAS,GAAGH,QAAQ;QACxB7B,GAAG,CAACiC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEtC,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,MAAM,CAAC;;QAE/C;QACAC,GAAG,CAACgC,SAAS,GAAG,SAAS;QACzBhC,GAAG,CAACqC,SAAS,CAAC,CAAC;QACfrC,GAAG,CAACsC,GAAG,CAAC3C,MAAM,CAACG,KAAK,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAEW,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;QACpDvC,GAAG,CAACwC,IAAI,CAAC,CAAC;;QAEV;QACAxC,GAAG,CAACgC,SAAS,GAAG,SAAS;QACzB,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;UAC3B,MAAMC,CAAC,GAAG1B,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAGhD,MAAM,CAACG,KAAK;UACtC,MAAMsC,CAAC,GAAG3B,IAAI,CAACkC,MAAM,CAAC,CAAC,IAAIhD,MAAM,CAACI,MAAM,GAAG,CAAC,CAAC;UAC7CC,GAAG,CAACqC,SAAS,CAAC,CAAC;UACfrC,GAAG,CAACsC,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE3B,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;UAChCvC,GAAG,CAACwC,IAAI,CAAC,CAAC;QACZ;MACF;IACF,CAAC;IAED,MAAMI,QAAQ,GAAGjB,WAAW,CAACb,UAAU,CAAC,IAAIa,WAAW,CAAC,oCAAoC,CAAC;IAC7FiB,QAAQ,CAAC,CAAC;EACZ,CAAC;EAED,MAAM7B,cAAc,GAAGA,CAACf,GAAG,EAAEL,MAAM,EAAEqB,UAAU,EAAE6B,IAAI,KAAK;IACxD7B,UAAU,CAAC8B,OAAO,CAAC,CAACC,SAAS,EAAEC,KAAK,KAAK;MACvC,MAAMb,CAAC,GAAGxC,MAAM,CAACG,KAAK,GAAG,CAAC,GAAG,CAACkD,KAAK,GAAG,GAAG,IAAI,GAAG;MAChD,MAAMZ,CAAC,GAAGzC,MAAM,CAACI,MAAM,GAAG,GAAG;MAC7B,MAAMkD,MAAM,GAAGxC,IAAI,CAACyC,GAAG,CAACL,IAAI,GAAGpC,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE;;MAEhD;MACAvC,GAAG,CAACgC,SAAS,GAAGe,SAAS,CAACI,KAAK;MAE/B,IAAIJ,SAAS,CAACK,KAAK,KAAK,QAAQ,EAAE;QAChCpD,GAAG,CAACqC,SAAS,CAAC,CAAC;QACfrC,GAAG,CAACsC,GAAG,CAACH,CAAC,EAAEC,CAAC,GAAGa,MAAM,EAAE,EAAE,EAAE,CAAC,EAAExC,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;QAC1CvC,GAAG,CAACwC,IAAI,CAAC,CAAC;MACZ,CAAC,MAAM,IAAIO,SAAS,CAACK,KAAK,KAAK,QAAQ,EAAE;QACvCpD,GAAG,CAACiC,QAAQ,CAACE,CAAC,GAAG,EAAE,GAAGc,MAAM,GAAC,CAAC,EAAEb,CAAC,GAAG,EAAE,GAAGa,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MAC1D,CAAC,MAAM,IAAIF,SAAS,CAACK,KAAK,KAAK,MAAM,EAAE;QACrCC,QAAQ,CAACrD,GAAG,EAAEmC,CAAC,EAAEC,CAAC,GAAGa,MAAM,EAAE,EAAE,CAAC;MAClC;;MAEA;MACAjD,GAAG,CAACgC,SAAS,GAAG,SAAS;MACzBhC,GAAG,CAACsD,IAAI,GAAG,iBAAiB;MAC5BtD,GAAG,CAACuD,SAAS,GAAG,QAAQ;MACxBvD,GAAG,CAACwD,QAAQ,CAACT,SAAS,CAACU,IAAI,CAAC,CAAC,CAAC,EAAEtB,CAAC,EAAEC,CAAC,GAAGa,MAAM,GAAG,CAAC,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC;EAED,MAAMI,QAAQ,GAAGA,CAACrD,GAAG,EAAE0D,EAAE,EAAEC,EAAE,EAAEC,MAAM,KAAK;IACxC,MAAMC,MAAM,GAAG,CAAC;IAChB,MAAMC,WAAW,GAAGF,MAAM;IAC1B,MAAMG,WAAW,GAAGH,MAAM,GAAG,CAAC;IAE9B5D,GAAG,CAACqC,SAAS,CAAC,CAAC;IACf,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2B,MAAM,GAAG,CAAC,EAAE3B,CAAC,EAAE,EAAE;MACnC,MAAM8B,KAAK,GAAI9B,CAAC,GAAGzB,IAAI,CAAC8B,EAAE,GAAIsB,MAAM,GAAGpD,IAAI,CAAC8B,EAAE,GAAG,CAAC;MAClD,MAAM0B,CAAC,GAAG/B,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG4B,WAAW,GAAGC,WAAW;MACjD,MAAM5B,CAAC,GAAGuB,EAAE,GAAGjD,IAAI,CAACyD,GAAG,CAACF,KAAK,CAAC,GAAGC,CAAC;MAClC,MAAM7B,CAAC,GAAGuB,EAAE,GAAGlD,IAAI,CAACyC,GAAG,CAACc,KAAK,CAAC,GAAGC,CAAC;MAElC,IAAI/B,CAAC,KAAK,CAAC,EAAE;QACXlC,GAAG,CAACmE,MAAM,CAAChC,CAAC,EAAEC,CAAC,CAAC;MAClB,CAAC,MAAM;QACLpC,GAAG,CAACoE,MAAM,CAACjC,CAAC,EAAEC,CAAC,CAAC;MAClB;IACF;IACApC,GAAG,CAACqE,SAAS,CAAC,CAAC;IACfrE,GAAG,CAACwC,IAAI,CAAC,CAAC;EACZ,CAAC;EAED,MAAMvB,QAAQ,GAAGA,CAACjB,GAAG,EAAEL,MAAM,EAAEuB,IAAI,KAAK;IACtC,IAAI,CAACA,IAAI,EAAE;;IAEX;IACAlB,GAAG,CAACgC,SAAS,GAAG,0BAA0B;IAC1C,MAAMsC,OAAO,GAAG,EAAE;IAClB,MAAMC,SAAS,GAAGvE,GAAG,CAACwE,WAAW,CAACtD,IAAI,CAAC,CAACpB,KAAK,GAAGwE,OAAO,GAAG,CAAC;IAC3D,MAAMG,UAAU,GAAG,EAAE;IACrB,MAAMtC,CAAC,GAAG,CAACxC,MAAM,CAACG,KAAK,GAAGyE,SAAS,IAAI,CAAC;IACxC,MAAMnC,CAAC,GAAGzC,MAAM,CAACI,MAAM,GAAG,CAAC,GAAG0E,UAAU,GAAG,CAAC;IAE5CzE,GAAG,CAACiC,QAAQ,CAACE,CAAC,EAAEC,CAAC,EAAEmC,SAAS,EAAEE,UAAU,CAAC;;IAEzC;IACAzE,GAAG,CAACgC,SAAS,GAAG,SAAS;IACzBhC,GAAG,CAACsD,IAAI,GAAG,YAAY;IACvBtD,GAAG,CAACuD,SAAS,GAAG,QAAQ;IACxBvD,GAAG,CAACwD,QAAQ,CAACtC,IAAI,EAAEvB,MAAM,CAACG,KAAK,GAAG,CAAC,EAAEH,MAAM,CAACI,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;EAC7D,CAAC;EAED,MAAMoB,WAAW,GAAGA,CAACnB,GAAG,EAAEL,MAAM,EAAEyB,OAAO,EAAEyB,IAAI,KAAK;IAClD,IAAIzB,OAAO,CAACsD,QAAQ,CAAC,UAAU,CAAC,EAAE;MAChC1E,GAAG,CAACgC,SAAS,GAAG,wBAAwB;MACxC,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;QAC3B,MAAMC,CAAC,GAAG1B,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAGhD,MAAM,CAACG,KAAK;QACtC,MAAMsC,CAAC,GAAG3B,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAGhD,MAAM,CAACI,MAAM;QACvC,MAAM4E,IAAI,GAAGlE,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;QAClC3C,GAAG,CAACqC,SAAS,CAAC,CAAC;QACfrC,GAAG,CAACsC,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAEuC,IAAI,EAAE,CAAC,EAAElE,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;QACnCvC,GAAG,CAACwC,IAAI,CAAC,CAAC;MACZ;IACF;IAEA,IAAIpB,OAAO,CAACsD,QAAQ,CAAC,SAAS,CAAC,EAAE;MAC/B1E,GAAG,CAAC4E,WAAW,GAAG,0BAA0B;MAC5C5E,GAAG,CAAC6E,SAAS,GAAG,CAAC;MACjB,KAAK,IAAI3C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B,MAAMC,CAAC,GAAG1B,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAGhD,MAAM,CAACG,KAAK;QACtC,MAAMsC,CAAC,GAAGzC,MAAM,CAACI,MAAM,GAAG,CAAC8C,IAAI,GAAG,GAAG,GAAGX,CAAC,GAAG,EAAE,IAAIvC,MAAM,CAACI,MAAM;QAC/DC,GAAG,CAACqC,SAAS,CAAC,CAAC;QACfrC,GAAG,CAACsC,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAE,EAAE,GAAG3B,IAAI,CAACkC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,EAAElC,IAAI,CAAC8B,EAAE,GAAG,CAAC,CAAC;QACtDvC,GAAG,CAAC8E,MAAM,CAAC,CAAC;MACd;IACF;EACF,CAAC;EAED,MAAMrD,SAAS,GAAIvB,MAAM,IAAK;IAC5B,OAAO,IAAI6E,OAAO,CAAEC,OAAO,IAAK;MAC9B,MAAMC,GAAG,GAAG,IAAInH,GAAG,CAAC;QAClBoH,OAAO,EAAE,CAAC;QACVzG,OAAO,EAAE,EAAE;QACXqB,KAAK,EAAEvB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,IAAI;QAC3CwB,MAAM,EAAExB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,GAAG;QAC3C4G,YAAY,EAAE;MAChB,CAAC,CAAC;;MAEF;MACA,MAAMC,UAAU,GAAG,EAAE;MACrBlF,MAAM,CAAC4C,OAAO,CAAC,CAAClC,KAAK,EAAEoC,KAAK,KAAK;QAC/B,IAAIA,KAAK,GAAGoC,UAAU,KAAK,CAAC,EAAE;UAC5B,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;UACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;YACjBN,GAAG,CAACO,QAAQ,CAACH,GAAG,EAAE;cAAEI,KAAK,EAAEL,UAAU,GAAG;YAAG,CAAC,CAAC,CAAC,CAAC;UACjD,CAAC;UACDC,GAAG,CAACK,GAAG,GAAG9E,KAAK;QACjB;MACF,CAAC,CAAC;MAEFqE,GAAG,CAACU,EAAE,CAAC,UAAU,EAAGC,IAAI,IAAK;QAC3B,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACN,MAAM,GAAG,MAAM;UACpBP,OAAO,CAACa,MAAM,CAACE,MAAM,CAAC;QACxB,CAAC;QACDF,MAAM,CAACG,aAAa,CAACJ,IAAI,CAAC;MAC5B,CAAC,CAAC;;MAEF;MACAK,UAAU,CAAC,MAAM;QACfhB,GAAG,CAACiB,MAAM,CAAC,CAAC;MACd,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;EACJ,CAAC;EAED,MAAMxE,SAAS,GAAG,MAAOxB,MAAM,IAAK;IAClC,IAAI;MACFpB,iBAAiB,CAAC,EAAE,CAAC;MACrBI,eAAe,CAAC,uBAAuB,CAAC;MACxCQ,OAAO,CAACN,GAAG,CAAC,0BAA0B,CAAC;;MAEvC;MACA,MAAMO,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACG,KAAK,GAAGvB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,IAAI;MACnDoB,MAAM,CAACI,MAAM,GAAGxB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,GAAG;MACnD,MAAMyB,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MAEnCnB,iBAAiB,CAAC,EAAE,CAAC;MACrBI,eAAe,CAAC,2BAA2B,CAAC;MAE5C,MAAMiH,MAAM,GAAGxG,MAAM,CAACyG,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;MACzC,MAAMC,aAAa,GAAG,IAAIC,aAAa,CAACH,MAAM,EAAE;QAC9CI,QAAQ,EAAE,uBAAuB;QACjCC,kBAAkB,EAAE/H,OAAO,KAAK,MAAM,GAAG,OAAO,GAAGA,OAAO,KAAK,QAAQ,GAAG,OAAO,GAAG;MACtF,CAAC,CAAC;MAEF,MAAMgI,MAAM,GAAG,EAAE;MACjBJ,aAAa,CAACK,eAAe,GAAIC,KAAK,IAAK;QACzCF,MAAM,CAACpF,IAAI,CAACsF,KAAK,CAAC;MACpB,CAAC;MAEDN,aAAa,CAACO,MAAM,GAAG,MAAM;QAC3B9H,iBAAiB,CAAC,EAAE,CAAC;QACrBI,eAAe,CAAC,qBAAqB,CAAC;QAEtC,MAAM0G,IAAI,GAAG,IAAIiB,IAAI,CAACJ,MAAM,EAAE;UAAEK,IAAI,EAAE;QAAa,CAAC,CAAC;;QAErD;QACA,MAAMjB,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACN,MAAM,GAAG,MAAM;UACpB;UACA,MAAMwB,OAAO,GAAGlB,MAAM,CAACE,MAAM;UAC7BrG,OAAO,CAACN,GAAG,CAAC,mCAAmC,EAAEwG,IAAI,CAACjB,IAAI,CAAC;UAC3D7F,iBAAiB,CAAC,GAAG,CAAC;UACtBkG,OAAO,CAAC+B,OAAO,CAAC;QAClB,CAAC;QACDlB,MAAM,CAACG,aAAa,CAACJ,IAAI,CAAC;MAC5B,CAAC;MAED9G,iBAAiB,CAAC,EAAE,CAAC;MACrBI,eAAe,CAAC,qBAAqB,CAAC;MAEtCmH,aAAa,CAACW,KAAK,CAAC,CAAC;;MAErB;MACA,IAAIC,UAAU,GAAG,CAAC;MAClB,MAAMC,SAAS,GAAGA,CAAA,KAAM;QACtB,IAAID,UAAU,IAAI/G,MAAM,CAACI,MAAM,EAAE;UAC/B+F,aAAa,CAACc,IAAI,CAAC,CAAC;UACpB;QACF;QAEA,MAAM9B,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;QACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;UACjBvF,GAAG,CAACoH,SAAS,CAAC/B,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;UACxB4B,UAAU,EAAE;UACZhB,UAAU,CAACiB,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;QAC9B,CAAC;QACD7B,GAAG,CAACK,GAAG,GAAGxF,MAAM,CAAC+G,UAAU,CAAC;MAC9B,CAAC;;MAED;MACAhB,UAAU,CAACiB,SAAS,EAAE,GAAG,CAAC;IAE5B,CAAC,CAAC,OAAOzH,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CP,eAAe,CAAC,2CAA2C,CAAC;MAC5D;MACA,OAAOmI,2BAA2B,CAACnH,MAAM,CAAC;IAC5C;EACF,CAAC;EAED,MAAMmH,2BAA2B,GAAInH,MAAM,IAAK;IAC9CpB,iBAAiB,CAAC,EAAE,CAAC;IACrBI,eAAe,CAAC,4BAA4B,CAAC;;IAE7C;IACA,MAAMS,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/C,MAAMyH,IAAI,GAAG7G,IAAI,CAAC8G,IAAI,CAAC9G,IAAI,CAAC+G,IAAI,CAACtH,MAAM,CAACI,MAAM,CAAC,CAAC;IAChD,MAAMmH,IAAI,GAAGhH,IAAI,CAAC8G,IAAI,CAACrH,MAAM,CAACI,MAAM,GAAGgH,IAAI,CAAC;IAC5C,MAAMI,UAAU,GAAG,GAAG;IACtB,MAAMC,WAAW,GAAG,GAAG;IAEvBhI,MAAM,CAACG,KAAK,GAAGwH,IAAI,GAAGI,UAAU;IAChC/H,MAAM,CAACI,MAAM,GAAG0H,IAAI,GAAGE,WAAW;IAClC,MAAM3H,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;IAEnCC,MAAM,CAAC4C,OAAO,CAAC,CAAClC,KAAK,EAAEoC,KAAK,KAAK;MAC/B,MAAMqC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;QACjB,MAAMqC,GAAG,GAAG5E,KAAK,GAAGsE,IAAI;QACxB,MAAMO,GAAG,GAAGpH,IAAI,CAACqH,KAAK,CAAC9E,KAAK,GAAGsE,IAAI,CAAC;QACpCtH,GAAG,CAACoH,SAAS,CAAC/B,GAAG,EAAEuC,GAAG,GAAGF,UAAU,EAAEG,GAAG,GAAGF,WAAW,EAAED,UAAU,EAAEC,WAAW,CAAC;QAEhF,IAAI3E,KAAK,KAAK9C,MAAM,CAACI,MAAM,GAAG,CAAC,EAAE;UAC/B;UACA,MAAMyG,OAAO,GAAGpH,MAAM,CAAC2B,SAAS,CAAC,WAAW,CAAC;UAC7CxC,iBAAiB,CAAC,GAAG,CAAC;UACtBI,eAAe,CAAC,wBAAwB,CAAC;UACzC8F,OAAO,CAAC+B,OAAO,CAAC;QAClB;MACF,CAAC;MACD1B,GAAG,CAACK,GAAG,GAAG9E,KAAK;IACjB,CAAC,CAAC;IAEF,OAAO,IAAImE,OAAO,CAACC,OAAO,IAAI;MAC5B;IAAA,CACD,CAAC;EACJ,CAAC;EAED,MAAM+C,kBAAkB,GAAI7H,MAAM,IAAK;IACrC,OAAO,IAAI6E,OAAO,CAAEC,OAAO,IAAK;MAC9B,MAAMrF,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACG,KAAK,GAAGvB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,IAAI;MACnDoB,MAAM,CAACI,MAAM,GAAGxB,UAAU,KAAK,OAAO,GAAG,IAAI,GAAG,GAAG;MACnD,MAAMyB,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MAEnC,MAAMkG,MAAM,GAAGxG,MAAM,CAACyG,aAAa,CAAC,EAAE,CAAC;MACvC,MAAMC,aAAa,GAAG,IAAIC,aAAa,CAACH,MAAM,EAAE;QAC9CI,QAAQ,EAAE,uBAAuB;QACjCC,kBAAkB,EAAE/H,OAAO,KAAK,MAAM,GAAG,OAAO,GAAGA,OAAO,KAAK,QAAQ,GAAG,OAAO,GAAG;MACtF,CAAC,CAAC;MAEF,MAAMgI,MAAM,GAAG,EAAE;MACjBJ,aAAa,CAACK,eAAe,GAAIC,KAAK,IAAKF,MAAM,CAACpF,IAAI,CAACsF,KAAK,CAAC;MAC7DN,aAAa,CAACO,MAAM,GAAG,MAAM;QAC3B,MAAMhB,IAAI,GAAG,IAAIiB,IAAI,CAACJ,MAAM,EAAE;UAAEK,IAAI,EAAE;QAAa,CAAC,CAAC;QACrD,MAAMjB,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACN,MAAM,GAAG,MAAMP,OAAO,CAACa,MAAM,CAACE,MAAM,CAAC;QAC5CF,MAAM,CAACG,aAAa,CAACJ,IAAI,CAAC;MAC5B,CAAC;MAEDS,aAAa,CAACW,KAAK,CAAC,CAAC;MAErB,IAAIC,UAAU,GAAG,CAAC;MAClB,MAAMC,SAAS,GAAGA,CAAA,KAAM;QACtB,IAAID,UAAU,IAAI/G,MAAM,CAACI,MAAM,EAAE;UAC/B+F,aAAa,CAACc,IAAI,CAAC,CAAC;UACpB;QACF;QAEA,MAAM9B,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;QACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;UACjBvF,GAAG,CAACoH,SAAS,CAAC/B,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;UACxB4B,UAAU,EAAE;UACZhB,UAAU,CAACiB,SAAS,EAAE,EAAE,CAAC;QAC3B,CAAC;QACD7B,GAAG,CAACK,GAAG,GAAGxF,MAAM,CAAC+G,UAAU,CAAC;MAC9B,CAAC;MAEDhB,UAAU,CAACiB,SAAS,EAAE,GAAG,CAAC;IAC5B,CAAC,CAAC;EACJ,CAAC;EAED,MAAM1H,aAAa,GAAIuH,OAAO,IAAK;IACjC,MAAMiB,IAAI,GAAGpI,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCmI,IAAI,CAACC,IAAI,GAAGlB,OAAO;;IAEnB;IACA,IAAImB,SAAS,GAAG,KAAK;IACrB,IAAI3B,QAAQ,GAAG,WAAW;IAE1B,IAAIQ,OAAO,CAACrC,QAAQ,CAAC,YAAY,CAAC,EAAE;MAClCwD,SAAS,GAAG,MAAM;MAClB3B,QAAQ,GAAG,YAAY;IACzB,CAAC,MAAM,IAAIQ,OAAO,CAACrC,QAAQ,CAAC,WAAW,CAAC,EAAE;MACxCwD,SAAS,GAAG,KAAK;MACjB3B,QAAQ,GAAG,WAAW;IACxB;IAEAyB,IAAI,CAACG,QAAQ,GAAG,cAAcC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIH,SAAS,EAAE;;IAEvD;IACA,IAAInB,OAAO,CAACuB,UAAU,CAAC,OAAO,CAAC,EAAE;MAC/B,MAAMC,UAAU,GAAGxB,OAAO,CAACyB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACxC,MAAMC,cAAc,GAAGC,IAAI,CAACH,UAAU,CAAC;MACvC,MAAMI,WAAW,GAAG,IAAIC,KAAK,CAACH,cAAc,CAACnI,MAAM,CAAC;MACpD,KAAK,IAAI4B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuG,cAAc,CAACnI,MAAM,EAAE4B,CAAC,EAAE,EAAE;QAC9CyG,WAAW,CAACzG,CAAC,CAAC,GAAGuG,cAAc,CAACI,UAAU,CAAC3G,CAAC,CAAC;MAC/C;MACA,MAAM4G,SAAS,GAAG,IAAIC,UAAU,CAACJ,WAAW,CAAC;MAC7C,MAAM/C,IAAI,GAAG,IAAIiB,IAAI,CAAC,CAACiC,SAAS,CAAC,EAAE;QAAEhC,IAAI,EAAEP;MAAS,CAAC,CAAC;MACtDyB,IAAI,CAACC,IAAI,GAAGe,GAAG,CAACC,eAAe,CAACrD,IAAI,CAAC;IACvC;IAEAhG,QAAQ,CAACsJ,IAAI,CAACC,WAAW,CAACnB,IAAI,CAAC;IAC/BA,IAAI,CAACoB,KAAK,CAAC,CAAC;IACZxJ,QAAQ,CAACsJ,IAAI,CAACG,WAAW,CAACrB,IAAI,CAAC;;IAE/B;IACA,IAAIA,IAAI,CAACC,IAAI,CAACK,UAAU,CAAC,OAAO,CAAC,EAAE;MACjCU,GAAG,CAACM,eAAe,CAACtB,IAAI,CAACC,IAAI,CAAC;IAChC;EACF,CAAC;EAED,MAAMsB,aAAa,GAAG;IACpBC,GAAG,EAAE;MACHC,IAAI,eAAExL,OAAA,CAACR,OAAO;QAAAiM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;MACjBpG,IAAI,EAAE,WAAW;MACjBqG,WAAW,EAAE,kCAAkC;MAC/CC,QAAQ,EAAE,UAAU;MACpBC,aAAa,EAAE;IACjB,CAAC;IACD/E,GAAG,EAAE;MACHwE,IAAI,eAAExL,OAAA,CAACP,WAAW;QAAAgM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;MACrBpG,IAAI,EAAE,eAAe;MACrBqG,WAAW,EAAE,0BAA0B;MACvCC,QAAQ,EAAE,SAAS;MACnBC,aAAa,EAAE;IACjB;EACF,CAAC;EAED,MAAMC,iBAAiB,GAAG;IACxB,OAAO,EAAE;MAAEnK,KAAK,EAAE,IAAI;MAAEC,MAAM,EAAE,IAAI;MAAEtB,OAAO,EAAE;IAAU,CAAC;IAC1D,MAAM,EAAE;MAAEqB,KAAK,EAAE,IAAI;MAAEC,MAAM,EAAE,GAAG;MAAEtB,OAAO,EAAE;IAAK;EACpD,CAAC;EAED,oBACER,OAAA;IAAKiM,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBlM,OAAA;MAAKiM,SAAS,EAAC,oCAAoC;MAAAC,QAAA,gBACjDlM,OAAA;QAAIiM,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EAAC;MAAiB;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAE5E5L,OAAA;QAAKiM,SAAS,EAAC,2BAA2B;QAAAC,QAAA,gBAExClM,OAAA;UAAKiM,SAAS,EAAC,WAAW;UAAAC,QAAA,eACxBlM,OAAA;YAAAkM,QAAA,gBACElM,OAAA;cAAIiM,SAAS,EAAC,sEAAsE;cAAAC,QAAA,gBAClFlM,OAAA,CAACN,KAAK;gBAACuM,SAAS,EAAC;cAAe;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACnC5L,OAAA;gBAAAkM,QAAA,EAAM;cAAe;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1B,CAAC,eAGL5L,OAAA;cAAKiM,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACxBlM,OAAA;gBAAOiM,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAM;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnE5L,OAAA;gBAAKiM,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,EACpCC,MAAM,CAACC,OAAO,CAACd,aAAa,CAAC,CAACe,GAAG,CAAC,CAAC,CAACC,MAAM,EAAEC,OAAO,CAAC,kBACnDvM,OAAA;kBAEEwM,OAAO,EAAEA,CAAA,KAAMnM,eAAe,CAACiM,MAAM,CAAE;kBACvCL,SAAS,EAAE,0CACT7L,YAAY,KAAKkM,MAAM,GACnB,gCAAgC,GAChC,uCAAuC,EAC1C;kBAAAJ,QAAA,gBAEHlM,OAAA;oBAAKiM,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EACnEK,OAAO,CAACf;kBAAI;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV,CAAC,eACN5L,OAAA;oBAAKiM,SAAS,EAAC,mCAAmC;oBAAAC,QAAA,EAAEK,OAAO,CAAC/G;kBAAI;oBAAAiG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACvE5L,OAAA;oBAAKiM,SAAS,EAAC,4BAA4B;oBAAAC,QAAA,EAAEK,OAAO,CAACV;kBAAW;oBAAAJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA,GAZlEU,MAAM;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAaL,CACT;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGN5L,OAAA;cAAKiM,SAAS,EAAC,gBAAgB;cAAAC,QAAA,gBAC7BlM,OAAA;gBAAOiM,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAU;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACvE5L,OAAA;gBAAKiM,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,EACpCC,MAAM,CAACC,OAAO,CAACJ,iBAAiB,CAAC,CAACK,GAAG,CAAC,CAAC,CAACI,GAAG,EAAEF,OAAO,CAAC,kBACpDvM,OAAA;kBAEEwM,OAAO,EAAEA,CAAA,KAAMjM,aAAa,CAACkM,GAAG,CAAE;kBAClCR,SAAS,EAAE,0CACT3L,UAAU,KAAKmM,GAAG,GACd,gCAAgC,GAChC,uCAAuC,EAC1C;kBAAAP,QAAA,gBAEHlM,OAAA;oBAAKiM,SAAS,EAAC,mCAAmC;oBAAAC,QAAA,EAAEO;kBAAG;oBAAAhB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC9D5L,OAAA;oBAAKiM,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,EAAEK,OAAO,CAAC/L;kBAAO;oBAAAiL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC9D5L,OAAA;oBAAKiM,SAAS,EAAC,4BAA4B;oBAAAC,QAAA,GACxCK,OAAO,CAAC1K,KAAK,EAAC,QAAG,EAAC0K,OAAO,CAACzK,MAAM;kBAAA;oBAAA2J,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9B,CAAC;gBAAA,GAZDa,GAAG;kBAAAhB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAaF,CACT;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGN5L,OAAA;cAAKiM,SAAS,EAAC,gBAAgB;cAAAC,QAAA,gBAC7BlM,OAAA;gBAAOiM,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAO;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACpE5L,OAAA;gBACE0M,KAAK,EAAElM,OAAQ;gBACfmM,QAAQ,EAAGC,CAAC,IAAKnM,UAAU,CAACmM,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;gBAC5CT,SAAS,EAAC,2FAA2F;gBAAAC,QAAA,gBAErGlM,OAAA;kBAAQ0M,KAAK,EAAC,MAAM;kBAAAR,QAAA,EAAC;gBAAmB;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACjD5L,OAAA;kBAAQ0M,KAAK,EAAC,QAAQ;kBAAAR,QAAA,EAAC;gBAAiB;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACjD5L,OAAA;kBAAQ0M,KAAK,EAAC,KAAK;kBAAAR,QAAA,EAAC;gBAAkB;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGN5L,OAAA;UAAKiM,SAAS,EAAC,WAAW;UAAAC,QAAA,gBAExBlM,OAAA;YAAKiM,SAAS,EAAC,4DAA4D;YAAAC,QAAA,gBACzElM,OAAA;cAAIiM,SAAS,EAAC,0CAA0C;cAAAC,QAAA,EAAC;YAAiB;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC/E5L,OAAA;cAAKiM,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChClM,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAS;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChD5L,OAAA;kBAAMiM,SAAS,EAAC,aAAa;kBAAAC,QAAA,GAAEhM,UAAU,CAACwC,QAAQ,EAAC,UAAQ;gBAAA;kBAAA+I,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAO;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC9C5L,OAAA;kBAAMiM,SAAS,EAAC,aAAa;kBAAAC,QAAA,GAAEhM,UAAU,CAACkC,MAAM,CAACC,MAAM,EAAC,SAAO;gBAAA;kBAAAoJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnE,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAW;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAClD5L,OAAA;kBAAMiM,SAAS,EAAC,aAAa;kBAAAC,QAAA,GAAEhM,UAAU,CAAC6C,UAAU,CAACV,MAAM,EAAC,aAAW;gBAAA;kBAAAoJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3E,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAO;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC9C5L,OAAA;kBAAMiM,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAE9L;gBAAY;kBAAAqL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1D,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAW;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAClD5L,OAAA;kBAAMiM,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAE5L;gBAAU;kBAAAmL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9C,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,sBAAsB;gBAAAC,QAAA,gBACnClM,OAAA;kBAAMiM,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAe;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtD5L,OAAA;kBAAMiM,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAC1BZ,aAAa,CAAClL,YAAY,CAAC,CAAC0L;gBAAQ;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAGL,CAAClL,WAAW,IAAI,CAACI,cAAc,iBAC9Bd,OAAA;YACEwM,OAAO,EAAEpL,YAAa;YACtB6K,SAAS,EAAC,uOAAuO;YAAAC,QAAA,gBAEjPlM,OAAA,CAACT,UAAU;cAAC0M,SAAS,EAAC;YAAS;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAClC5L,OAAA;cAAAkM,QAAA,EAAM;YAAY;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CACT,EAEAlL,WAAW,iBACVV,OAAA;YAAKiM,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxBlM,OAAA;cAAKiM,SAAS,EAAC,kCAAkC;cAAAC,QAAA,eAC/ClM,OAAA;gBAAKiM,SAAS,EAAC;cAAgE;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnF,CAAC,eACN5L,OAAA;cAAKiM,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAC1BlM,OAAA;gBAAKiM,SAAS,EAAC,wCAAwC;gBAAAC,QAAA,EAAC;cAAY;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC1E5L,OAAA;gBAAKiM,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,eAClDlM,OAAA,CAACV,MAAM,CAACwN,GAAG;kBACTb,SAAS,EAAC,+DAA+D;kBACzEc,OAAO,EAAE;oBAAElL,KAAK,EAAE;kBAAE,CAAE;kBACtBmL,OAAO,EAAE;oBAAEnL,KAAK,EAAE,GAAGjB,cAAc;kBAAI,CAAE;kBACzCqM,UAAU,EAAE;oBAAEvK,QAAQ,EAAE;kBAAI;gBAAE;kBAAA+I,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/B;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACN5L,OAAA;gBAAKiM,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,GAAEtL,cAAc,EAAC,MAAI,EAACI,YAAY;cAAA;gBAAAyK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN,EAEA9K,cAAc,iBACbd,OAAA;YAAKiM,SAAS,EAAC,gEAAgE;YAAAC,QAAA,gBAC7ElM,OAAA,CAACL,aAAa;cAACsM,SAAS,EAAC;YAAsC;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAClE5L,OAAA;cAAKiM,SAAS,EAAC,iCAAiC;cAAAC,QAAA,EAAC;YAAgB;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACvE5L,OAAA;cAAKiM,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAC;YAExC;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACN5L,OAAA;cACEwM,OAAO,EAAEpL,YAAa;cACtB6K,SAAS,EAAC,gGAAgG;cAAAC,QAAA,EAC3G;YAED;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CACN,eAGD5L,OAAA;YAAKiM,SAAS,EAAC,kDAAkD;YAAAC,QAAA,eAC/DlM,OAAA;cAAKiM,SAAS,EAAC,4BAA4B;cAAAC,QAAA,gBACzClM,OAAA,CAACJ,qBAAqB;gBAACqM,SAAS,EAAC;cAAkC;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACtE5L,OAAA;gBAAKiM,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,gBACpClM,OAAA;kBAAKiM,SAAS,EAAC,kBAAkB;kBAAAC,QAAA,EAAC;gBAAY;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACpD5L,OAAA;kBAAIiM,SAAS,EAAC,yBAAyB;kBAAAC,QAAA,gBACrClM,OAAA;oBAAAkM,QAAA,EAAI;kBAAwC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACjD5L,OAAA;oBAAAkM,QAAA,EAAI;kBAAiC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC1C5L,OAAA;oBAAAkM,QAAA,EAAI;kBAA4C;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACrD5L,OAAA;oBAAAkM,QAAA,EAAI;kBAA4C;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGN5L,OAAA;MAAKiM,SAAS,EAAC,oCAAoC;MAAAC,QAAA,gBACjDlM,OAAA;QAAIiM,SAAS,EAAC,0CAA0C;QAAAC,QAAA,EAAC;MAAc;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC5E5L,OAAA;QAAKiM,SAAS,EAAC,WAAW;QAAAC,QAAA,EACvBhM,UAAU,CAACkC,MAAM,CAACiK,GAAG,CAAC,CAAC/J,KAAK,EAAEyC,KAAK,kBAClC/E,OAAA;UAAoBiM,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBACzDlM,OAAA;YAAKiM,SAAS,EAAC,wCAAwC;YAAAC,QAAA,GAAC,KAAG,EAAC,CAACnH,KAAK,GAAG,EAAE,EAAEmI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;UAAA;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3G5L,OAAA;YAAKiM,SAAS,EAAC;UAAsE;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5F5L,OAAA;YAAKiM,SAAS,EAAC,qCAAqC;YAAAC,QAAA,GAAC,QAAM,EAACnH,KAAK,GAAG,CAAC;UAAA;YAAA0G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAHpEtJ,KAAK,CAAC8K,EAAE;UAAA3B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAIb,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACzL,EAAA,CA1rBIF,aAAa;AAAAoN,EAAA,GAAbpN,aAAa;AA4rBnB,eAAeA,aAAa;AAAC,IAAAoN,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}